<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <title>Системные требования для развертывания ВМ — бот VK/Site → Telegram</title>
  <style>
    body { font-family: "Times New Roman", serif; font-size: 14pt; line-height: 1.35; margin: 2cm; }
    h1 { font-size: 18pt; text-align: center; margin: 0 0 24px 0; }
    h2 { font-size: 16pt; margin: 18px 0 10px 0; }
    p { margin: 6px 0; }
    ul { margin: 6px 0 10px 24px; }
    table { border-collapse: collapse; width: 100%; margin: 10px 0; }
    th, td { border: 1px solid #000; padding: 6px 8px; vertical-align: top; }
  </style>
</head>
<body>
  <h1>Системные требования для развертывания ВМ<br/>«Бот VK/Site → Telegram»</h1>
  <p>Версия документа: 06.02.2026</p>

  <h2>1. Назначение документа</h2>
  <p>Документ определяет минимальные и рекомендуемые требования к виртуальной машине для промышленного запуска бота публикации контента из VK и сайта alumni в Telegram.</p>

  <h2>2. Архитектура развертывания</h2>
  <p>2.1. Тип сервиса: фоновое Python-приложение без входящих HTTP-портов.</p>
  <p>2.2. Модель взаимодействия: только исходящие HTTPS-запросы к внешним API (VK, Telegram, сайт источника).</p>
  <p>2.3. Хранение состояния: локальный файл <code>state.json</code> на диске ВМ.</p>

  <h2>3. Требования к вычислительным ресурсам ВМ</h2>
  <table>
    <tr>
      <th>Параметр</th>
      <th>Минимум</th>
      <th>Рекомендуется</th>
      <th>Комментарий</th>
    </tr>
    <tr>
      <td>vCPU</td>
      <td>1</td>
      <td>2</td>
      <td>Нагрузка в основном I/O-сетевая; 2 vCPU повышают устойчивость при пиках и обновлениях.</td>
    </tr>
    <tr>
      <td>RAM</td>
      <td>1 ГБ</td>
      <td>2 ГБ</td>
      <td>Достаточно для Python-процесса, HTTP-клиентов и буферов медиа.</td>
    </tr>
    <tr>
      <td>Диск</td>
      <td>5 ГБ</td>
      <td>10 ГБ</td>
      <td>Код, venv, журналирование с ротацией, файл состояния, временные файлы.</td>
    </tr>
    <tr>
      <td>Сетевой канал</td>
      <td>5 Мбит/с</td>
      <td>10 Мбит/с</td>
      <td>Исходящий трафик на API и загрузку изображений.</td>
    </tr>
  </table>

  <h2>4. Требования к ОС и системному ПО</h2>
  <ul>
    <li>Linux x86_64 (рекомендуемо: Ubuntu Server 22.04 LTS или совместимый дистрибутив);</li>
    <li>Python 3.11+;</li>
    <li>pip и venv для установки зависимостей;</li>
    <li>systemd для автозапуска и перезапуска сервиса;</li>
    <li>корректно настроенные DNS и время (NTP).</li>
  </ul>

  <h2>5. Сетевые требования и доступы</h2>
  <p>5.1. Открытый исходящий доступ по TCP 443 к доменам:</p>
  <ul>
    <li><code>api.telegram.org</code>;</li>
    <li><code>api.vk.com</code>;</li>
    <li>хосту VK Long Poll (выдается API динамически);</li>
    <li><code>www.econ.msu.ru</code> и связанным URL изображений этого домена.</li>
  </ul>
  <p>5.2. Входящие порты для работы бота не требуются.</p>

  <h2>6. Требования к учетным данным и конфигурации</h2>
  <p>6.1. Обязательные параметры конфигурации:</p>
  <ul>
    <li><code>VK_GROUP_ID</code>, <code>VK_GROUP_TOKEN</code>;</li>
    <li><code>VK_USER_TOKEN</code> (требуется для чтения wall.get и загрузки фото в VK);</li>
    <li><code>TG_BOT_TOKEN</code>, <code>TG_CHANNEL_ID</code>, <code>OWNER_ID</code>;</li>
    <li><code>MODERATION_MODE</code>, <code>SOURCE_MODE</code> (по необходимости).</li>
  </ul>
  <p>6.2. Секреты должны храниться в защищенных переменных окружения или в закрытом конфигурационном файле с ограничением доступа на чтение.</p>

  <h2>7. Требования по эксплуатации и мониторингу</h2>
  <ul>
    <li>включить автозапуск и рестарт при падении (например, <code>Restart=on-failure</code>);</li>
    <li>контролировать файл логов <code>logs/bot.log</code> и stdout сервиса;</li>
    <li>контролировать размер диска с учетом ротации логов;</li>
    <li>обеспечить резервное копирование <code>state.json</code> (минимум ежедневное).</li>
  </ul>

  <h2>8. Требования к информационной безопасности</h2>
  <ul>
    <li>доступ к ВМ только по защищенному админ-каналу (VPN/SSH по ключам);</li>
    <li>минимизация прав системного пользователя процесса;</li>
    <li>запрет на публикацию токенов в логах, тикетах и переписке;</li>
    <li>регламент ротации токенов при компрометации.</li>
  </ul>

  <h2>9. Критерии готовности ВМ к запуску</h2>
  <ul>
    <li>установлен Python 3.11+ и зависимости проекта;</li>
    <li>настроены все обязательные переменные конфигурации;</li>
    <li>бот имеет права публикации в целевом Telegram-канале;</li>
    <li>подтвержден исходящий доступ к требуемым внешним API;</li>
    <li>выполнен пробный запуск и получено стартовое сообщение владельцу в Telegram.</li>
  </ul>

</body>
</html>
